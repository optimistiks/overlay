{"version":3,"sources":["streamelements.js","Overlay.tsx","index.tsx","Overlay.module.css"],"names":["log","debug","animatorGeneral","duration","enter","Overlay","useState","data","setData","React","activate","setActivate","useEffect","timeout","setTimeout","clearTimeout","window","onWidgetLoadInitialData","initOverlay","addEventListener","obj","detail","event","itemId","listener","split","recents","sort","a","b","Date","parse","createdAt","currency","fieldData","eventsLimit","includeFollowers","includeRedemptions","includeHosts","minHost","includeRaids","minRaid","includeSubs","includeTips","minTip","includeCheers","minCheer","direction","locale","textOrder","fadeoutTime","className","styles","root","animator","grid","grid__camera","frameBox","hover","grid__topbar","grid__sidebar","grid__video","console","bind","enable","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"0OAEMA,EAAMC,IAAM,kB,WCKZD,EAAMC,IAAM,WAEZC,EAAkB,CAAEC,SAAU,CAAEC,MAAO,MAEtC,SAASC,IACd,MAAwBC,mBAAS,MAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAAgCC,IAAMH,UAAS,GAA/C,mBAAOI,EAAP,KAAiBC,EAAjB,KAsBA,OApBAC,qBAAU,WACR,IAAMC,EAAUC,YAAW,kBAAMH,GAAY,KAAO,KACpD,OAAO,kBAAMI,aAAaF,MACzB,IAEHD,qBAAU,WACJI,OAAOC,yBACTjB,EAAI,2BAA4B,CAAEO,KAAMS,OAAOC,0BAC/CT,EAAQQ,OAAOC,2BAEfjB,EAAI,yBACJgB,OAAOE,YAAcV,GDDzBQ,OAAOG,iBAAiB,mBAAmB,SAAUC,GACnDpB,EAAI,qBAAsB,CAAEoB,QAEvBA,EAAIC,OAAOC,QAIuB,qBAA5BF,EAAIC,OAAOC,MAAMC,SAC1BH,EAAIC,OAAOG,SAAW,qBAGPJ,EAAIC,OAAOG,SAASC,MAAM,KAAK,GAClCL,EAAIC,OAAOC,UAG3BN,OAAOG,iBAAiB,gBAAgB,SAAUC,GAChDpB,EAAI,kBAAmB,CAAEoB,QAEXA,EAAIC,OAAOK,QAEjBC,MAAK,SAAUC,EAAGC,GACxB,OAAOC,KAAKC,MAAMH,EAAEI,WAAaF,KAAKC,MAAMF,EAAEG,cAGjCZ,EAAIC,OAAOY,SAE1B,IAAMC,EAAYd,EAAIC,OAAOa,UAEfA,EAAUC,YACLD,EAAUE,iBACRF,EAAUG,mBAChBH,EAAUI,aACfJ,EAAUK,QACLL,EAAUM,aACfN,EAAUO,QACNP,EAAUQ,YACVR,EAAUS,YACfT,EAAUU,OACHV,EAAUW,cACfX,EAAUY,SACTZ,EAAUa,UACTb,EAAUc,OACXd,EAAUe,UACRf,EAAUgB,iBCvCvB,IAEHtC,qBAAU,WACRZ,EAAI,qBAAsBO,KACzB,CAACA,IAGF,qBAAK4C,UAAWC,IAAOC,KAAvB,SACE,eAAC,qBAAD,WACE,cAAC,iBAAD,IACA,cAAC,0BAAD,CAAyBC,SAAUpD,EAAnC,SACE,sBAAKiD,UAAWC,IAAOG,KAAvB,UACE,qBAAKJ,UAAWC,IAAOI,aAAvB,SAEE,cAAC,WAAD,CAEEL,UAAWC,IAAOK,SAClBH,SAAU,CAAE5C,YACZgD,OAAK,EAJP,sBASF,qBAAKP,UAAWC,IAAOO,aAAvB,SAEE,cAAC,WAAD,CAEER,UAAWC,IAAOK,SAClBH,SAAU,CAAE5C,YACZgD,OAAK,EAJP,sBASF,qBAAKP,UAAWC,IAAOQ,cAAvB,SAEE,cAAC,WAAD,CAEET,UAAWC,IAAOK,SAClBH,SAAU,CAAE5C,YACZgD,OAAK,EAJP,uBASF,qBAAKP,UAAWC,IAAOS,YAAvB,SAEE,cAAC,WAAD,CAEEV,UAAWC,IAAOK,SAClBH,SAAU,CAAE5C,YACZgD,OAAK,EAJP,+B,OCrEdzD,IAAMD,IAAM8D,QAAQ9D,IAAI+D,KAAKD,SAC7B7D,IAAM+D,OAAO,KAEbC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC9D,EAAD,MAEF+D,SAASC,eAAe,U,kBCb1BC,EAAOC,QAAU,CAAC,KAAO,sBAAsB,KAAO,sBAAsB,aAAe,8BAA8B,cAAgB,+BAA+B,aAAe,8BAA8B,YAAc,gC","file":"static/js/main.7f5df9a7.chunk.js","sourcesContent":["import debug from \"debug\";\r\n\r\nconst log = debug(\"streamelements\");\r\n\r\nexport function listenEvents() {\r\n  let eventsLimit = 5,\r\n    userLocale = \"en-US\",\r\n    includeFollowers = true,\r\n    includeRedemptions = true,\r\n    includeHosts = true,\r\n    minHost = 0,\r\n    includeRaids = true,\r\n    minRaid = 0,\r\n    includeSubs = true,\r\n    includeTips = true,\r\n    minTip = 0,\r\n    includeCheers = true,\r\n    direction = \"top\",\r\n    textOrder = \"nameFirst\",\r\n    minCheer = 0,\r\n    fadeoutTime = 0;\r\n\r\n  let userCurrency,\r\n    totalEvents = 0;\r\n\r\n  window.addEventListener(\"onEventReceived\", function (obj) {\r\n    log(\"onEventReceived %O\", { obj });\r\n\r\n    if (!obj.detail.event) {\r\n      return;\r\n    }\r\n\r\n    if (typeof obj.detail.event.itemId !== \"undefined\") {\r\n      obj.detail.listener = \"redemption-latest\";\r\n    }\r\n\r\n    const listener = obj.detail.listener.split(\"-\")[0];\r\n    const event = obj.detail.event;\r\n  });\r\n\r\n  window.addEventListener(\"onWidgetLoad\", function (obj) {\r\n    log(\"onWidgetLoad %O\", { obj });\r\n\r\n    let recents = obj.detail.recents;\r\n\r\n    recents.sort(function (a, b) {\r\n      return Date.parse(a.createdAt) - Date.parse(b.createdAt);\r\n    });\r\n\r\n    userCurrency = obj.detail.currency;\r\n\r\n    const fieldData = obj.detail.fieldData;\r\n\r\n    eventsLimit = fieldData.eventsLimit;\r\n    includeFollowers = fieldData.includeFollowers === \"yes\";\r\n    includeRedemptions = fieldData.includeRedemptions === \"yes\";\r\n    includeHosts = fieldData.includeHosts === \"yes\";\r\n    minHost = fieldData.minHost;\r\n    includeRaids = fieldData.includeRaids === \"yes\";\r\n    minRaid = fieldData.minRaid;\r\n    includeSubs = fieldData.includeSubs === \"yes\";\r\n    includeTips = fieldData.includeTips === \"yes\";\r\n    minTip = fieldData.minTip;\r\n    includeCheers = fieldData.includeCheers === \"yes\";\r\n    minCheer = fieldData.minCheer;\r\n    direction = fieldData.direction;\r\n    userLocale = fieldData.locale;\r\n    textOrder = fieldData.textOrder;\r\n    fadeoutTime = fieldData.fadeoutTime;\r\n  });\r\n}\r\n","import React, { useEffect, useState } from \"react\";\nimport debug from \"debug\";\nimport { ArwesThemeProvider, StylesBaseline, FrameBox } from \"@arwes/core\";\nimport { AnimatorGeneralProvider } from \"@arwes/animation\";\nimport styles from \"./Overlay.module.css\";\nimport { listenEvents } from \"./streamelements\";\n\nconst log = debug(\"overlay\");\n\nconst animatorGeneral = { duration: { enter: 1000 } };\n\nexport function Overlay() {\n  const [data, setData] = useState(null);\n  const [activate, setActivate] = React.useState(false);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => setActivate(true), 1000);\n    return () => clearTimeout(timeout);\n  }, []);\n\n  useEffect(() => {\n    if (window.onWidgetLoadInitialData) {\n      log(\"found data in window, %O\", { data: window.onWidgetLoadInitialData });\n      setData(window.onWidgetLoadInitialData);\n    } else {\n      log(\"put setData to window\");\n      window.initOverlay = setData;\n    }\n    listenEvents();\n  }, []);\n\n  useEffect(() => {\n    log(\"data is updated %O\", data);\n  }, [data]);\n\n  return (\n    <div className={styles.root}>\n      <ArwesThemeProvider>\n        <StylesBaseline />\n        <AnimatorGeneralProvider animator={animatorGeneral}>\n          <div className={styles.grid}>\n            <div className={styles.grid__camera}>\n              {/* @ts-ignore */}\n              <FrameBox\n                // @ts-ignore\n                className={styles.frameBox}\n                animator={{ activate }}\n                hover\n              >\n                camera\n              </FrameBox>\n            </div>\n            <div className={styles.grid__topbar}>\n              {/* @ts-ignore */}\n              <FrameBox\n                // @ts-ignore\n                className={styles.frameBox}\n                animator={{ activate }}\n                hover\n              >\n                topbar\n              </FrameBox>\n            </div>\n            <div className={styles.grid__sidebar}>\n              {/* @ts-ignore */}\n              <FrameBox\n                // @ts-ignore\n                className={styles.frameBox}\n                animator={{ activate }}\n                hover\n              >\n                sidebar\n              </FrameBox>\n            </div>\n            <div className={styles.grid__video}>\n              {/* @ts-ignore */}\n              <FrameBox\n                // @ts-ignore\n                className={styles.frameBox}\n                animator={{ activate }}\n                hover\n              >\n                video\n              </FrameBox>\n            </div>\n          </div>\n        </AnimatorGeneralProvider>\n      </ArwesThemeProvider>\n    </div>\n  );\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport debug from \"debug\";\r\nimport { Overlay } from \"./Overlay\";\r\nimport \"./index.css\";\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\ndebug.log = console.log.bind(console);\r\ndebug.enable(\"*\");\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Overlay />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Overlay_root__2ig3N\",\"grid\":\"Overlay_grid__39_45\",\"grid__camera\":\"Overlay_grid__camera__2s1aJ\",\"grid__sidebar\":\"Overlay_grid__sidebar__2FPL4\",\"grid__topbar\":\"Overlay_grid__topbar__NV19h\",\"grid__video\":\"Overlay_grid__video__1zLPK\"};"],"sourceRoot":""}